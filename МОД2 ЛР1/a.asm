SSEG SEGMENT PARA STACK 'STACK'
     DB 64 DUP('STACK+++')
SSEG ENDS


DSEG	SEGMENT 'DATA'

N DW 4
R DW ?

DSEG	ENDS


CSEG	SEGMENT 'CODE'
ASSUME	CS:CSEG, DS:DSEG, SS:SSEG


FACTORIAL PROC NEAR
	PUSH BP
	MOV BP, SP
	MOV AX, SS:[BP + 4]
	MOV CX, SS:[BP + 6]
	
	CMP AX, 1
	JE RESULT
	
	PUSH AX
	DEC AX
	
	PUSH CX
	PUSH AX
	CALL FACTORIAL
	ADD SP, 4
	
	POP BX
	MUL BX
	PUSH SI
	MOV SI, CX
	MOV WORD PTR[SI], AX
	POP SI

RESULT:
	POP BP
	RET
	
FACTORIAL ENDP


START:
	MOV	AX,DSEG
	MOV	DS,AX
	
	MOV AX, OFFSET R
	PUSH AX	
	MOV AX, N
	PUSH AX
	CALL FACTORIAL
	ADD SP, 4
	
STOP:
	MOV	AH,4Ch
	INT	21h
	

CSEG	ENDS

	END	START
